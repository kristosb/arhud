{"version":3,"sources":["Components/Viewer/threejs/SceneSubject.js","Components/Viewer/threejs/GeneralLights.js","Components/Viewer/threejs/StereoCamera.js","Components/Viewer/threejs/StereoEffect.js","Components/Viewer/threejs/HudControls.js","Components/Viewer/threejs/Hud.js","Components/Viewer/threejs/SceneManager.js","Components/Viewer/threejs/threeEntryPoint.js","Components/Viewer/Viewer.js","App.js","reportWebVitals.js","index.js"],"names":["scene","group","THREE","boxGeometrySmall","makeInstance","geometry","color","x","y","z","material","cube","add","position","rotation","Math","PI","update","time","light","set","_eyeRight","Matrix4","_eyeLeft","offsetView","StereoCamera","this","type","aspect","eyeSep","offset","cameraL","PerspectiveCamera","layers","enable","matrixAutoUpdate","cameraR","_cache","focus","fov","near","far","zoom","camera","cache","xmin","xmax","projectionMatrix","clone","eyeSepHalf","eyeSepOnProjection","ymax","tan","MathUtils","DEG2RAD","elements","identity","setPosition","copy","multiply","matrixWorld","StereoEffect","renderer","_stereo","size","Vector2","getSize","setEyeSeparation","setOffset","setSize","width","height","render","updateMatrixWorld","parent","autoClear","clear","setScissorTest","setScissor","setViewport","hudControl","bm","lineWidth","globalLineWidth","localLineWidth","hudSimpleText","font","textAlign","fillText","hudBorder","strokeRect","crosshair","floor","strokeWidth","moveTo","lineTo","stroke","hud","canvas","screenDimensions","style","hudCanvas","document","createElement","hudBitmap","getContext","fillStyle","strokeStyle","globalAlpha","hudElements","info","HUD","border","Object","values","forEach","val","draw","hudTexture","needsUpdate","map","transparent","planeGeometry","plane","clock","mousePosition","background","buildScene","antialias","alpha","DPR","window","devicePixelRatio","setPixelRatio","gammaInput","gammaOutput","buildRender","aspectRatio","buildCamera","sceneSubjects","GeneralLights","SceneSubject","createSceneSubjects","effect","console","log","Hud","tanFOV","windowHeight","addEventListener","ev","keycode","which","elapsedTime","getElapsedTime","i","length","onWindowResize","atan","updateProjectionMatrix","onMouseMove","Viewer","container","appendChild","createCanvas","sceneManager","SceneManager","resizeCanvas","offsetWidth","offsetHeight","round","onresize","requestAnimationFrame","threeEntryPoint","threeRootElement","className","ref","element","Component","App","reportWebVitals","onPerfEntry","Function","then","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","StrictMode","getElementById"],"mappings":"4PAEe,SAASA,EAAMA,GAC1B,IAAMC,EAAQ,IAAIC,IAEZC,GADc,IAAID,IAAkB,GAAK,GAAK,IAC3B,IAAIA,IAAkB,KAAS,KAAS,OACjE,SAASE,EAAaC,EAAUC,EAAOC,EAAEC,EAAEC,GACvC,IAAMC,EAAW,IAAIR,IAAwB,CAACI,UAExCK,EAAO,IAAIT,IAAWG,EAAUK,GAQtC,OAPAV,EAAMY,IAAID,GAGVA,EAAKE,SAASN,EAAIA,EAClBI,EAAKE,SAASL,EAAIA,EAClBG,EAAKE,SAASJ,EAAIA,EAEXE,EAIXP,EAAaD,EAAkB,UAAY,KAAO,GAAI,MACtDC,EAAaD,EAAkB,MAAW,KAAO,GAAI,MAMrDF,EAAMa,SAASL,EAAIM,KAAKC,GAAG,EA4B3B,MAAO,CACHC,OAfJ,SAAgBC,MCvCL,SAASlB,EAAMA,GAK1B,IAEMmB,EAAQ,IAAIjB,IAFJ,SACI,GAelB,OAZAiB,EAAMN,SAASO,KAAK,EAAG,EAAG,GAC1BpB,EAAMY,IAAIO,GAWH,CACHF,OANJ,SAAgBC,M,0BCfdG,EAAY,IAAIC,IAChBC,EAAW,IAAID,IACfE,EAAa,IAAIF,IACjBG,E,WAEL,aAAe,oBAEdC,KAAKC,KAAO,eAEZD,KAAKE,OAAS,EAEdF,KAAKG,OAAS,KAERH,KAAKI,OAAS,EAEpBJ,KAAKK,QAAU,IAAIC,IACnBN,KAAKK,QAAQE,OAAOC,OAAQ,GAC5BR,KAAKK,QAAQI,kBAAmB,EAEhCT,KAAKU,QAAU,IAAIJ,IACnBN,KAAKU,QAAQH,OAAOC,OAAQ,GAC5BR,KAAKU,QAAQD,kBAAmB,EAEhCT,KAAKW,OAAS,CACbC,MAAO,KACPC,IAAK,KACLX,OAAQ,KACRY,KAAM,KACNC,IAAK,KACLC,KAAM,KACNb,OAAQ,KACCC,OAAQ,M,0CAInB,SAAQa,GAEP,IAAMC,EAAQlB,KAAKW,OAMnB,GAJoBO,EAAMN,QAAUK,EAAOL,OAASM,EAAML,MAAQI,EAAOJ,KACxEK,EAAMhB,SAAWe,EAAOf,OAASF,KAAKE,QAAUgB,EAAMJ,OAASG,EAAOH,MACtEI,EAAMH,MAAQE,EAAOF,KAAOG,EAAMF,OAASC,EAAOD,MAAQE,EAAMf,SAAWH,KAAKG,QAAUe,EAAMd,SAAWJ,KAAKI,OAE9F,CAElBc,EAAMN,MAAQK,EAAOL,MACrBM,EAAML,IAAMI,EAAOJ,IACnBK,EAAMhB,OAASe,EAAOf,OAASF,KAAKE,OACpCgB,EAAMJ,KAAOG,EAAOH,KACpBI,EAAMH,IAAME,EAAOF,IACnBG,EAAMF,KAAOC,EAAOD,KACpBE,EAAMf,OAASH,KAAKG,OACXe,EAAMd,OAASJ,KAAKI,OAI7B,IAIIe,EAAMC,EAJJC,EAAmBJ,EAAOI,iBAAiBC,QAC3CC,EAAaL,EAAMf,OAAS,EAC5BqB,EAAqBD,EAAaL,EAAMJ,KAAOI,EAAMN,MACrDa,EAASP,EAAMJ,KAAOzB,KAAKqC,IAAKC,IAAUC,QAAUV,EAAML,IAAM,IAAUK,EAAMF,KAKtFnB,EAASgC,SAAU,KAASN,EAC5B5B,EAAUkC,SAAU,IAAON,EAI3BJ,GAASM,EAAOP,EAAMhB,OAASsB,EAC/BJ,EAAOK,EAAOP,EAAMhB,OAASsB,EAE7BH,EAAiBQ,SAAU,GAAM,EAAIX,EAAMJ,MAASM,EAAOD,GAC3DE,EAAiBQ,SAAU,IAAQT,EAAOD,IAAWC,EAAOD,GAKnDrB,EAAWgC,WACXhC,EAAWiC,YAAY/B,KAAKW,OAAOP,OAAO,EAAE,GAC5CN,EAAWkC,KAAKlC,EAAWmC,SAASZ,IAEpCrB,KAAKK,QAAQgB,iBAAiBW,KAAMlC,GAG7CqB,GAASM,EAAOP,EAAMhB,OAASsB,EAC/BJ,EAAOK,EAAOP,EAAMhB,OAASsB,EAE7BH,EAAiBQ,SAAU,GAAM,EAAIX,EAAMJ,MAASM,EAAOD,GAC3DE,EAAiBQ,SAAU,IAAQT,EAAOD,IAAWC,EAAOD,IAErCM,EAAQD,EACnBC,EAAOD,EAEV1B,EAAWgC,WACXhC,EAAWiC,aAAa/B,KAAKW,OAAOP,OAAO,EAAE,GAC7CN,EAAWkC,KAAKlC,EAAWmC,SAASZ,IAE7CrB,KAAKU,QAAQW,iBAAiBW,KAAMlC,GAIrCE,KAAKK,QAAQ6B,YAAYF,KAAMf,EAAOiB,aAAcD,SAAUpC,GAC9DG,KAAKU,QAAQwB,YAAYF,KAAMf,EAAOiB,aAAcD,SAAUtC,O,KCjG5DwC,EAAe,SAAWC,GAE7B,IAAIC,EAAU,IAAItC,EAClBsC,EAAQnC,OAAS,GACjB,IAAIoC,EAAO,IAAIC,IAEZH,EAASI,QAASF,GAErBtC,KAAKyC,iBAAmB,SAAWtC,GAElCkC,EAAQlC,OAASA,GAGfH,KAAK0C,UAAY,SAAWtC,GAE9BiC,EAAQjC,OAASA,GAIlBJ,KAAK2C,QAAU,SAAWC,EAAOC,GAEhCT,EAASO,QAASC,EAAOC,IAI1B7C,KAAK8C,OAAS,SAAWxE,EAAO2C,GAC/B3C,EAAMyE,oBAEiB,OAAlB9B,EAAO+B,QAAkB/B,EAAO8B,oBAErCV,EAAQ9C,OAAQ0B,GAEhBmB,EAASI,QAASF,GAEbF,EAASa,WAAYb,EAASc,QACnCd,EAASe,gBAAgB,GAEzBf,EAASgB,WAAY,EAAG,EAAGd,EAAKM,MAAQ,EAAGN,EAAKO,QAChDT,EAASiB,YAAa,EAAG,EAAIf,EAAKM,MAAQ,EAAIN,EAAKO,QACnDT,EAASU,OAAQxE,EAAO+D,EAAQhC,SAEhC+B,EAASgB,WAAad,EAAKM,MAAQ,EAAI,EAAGN,EAAKM,MAAQ,EAAGN,EAAKO,QAC/DT,EAASiB,YAAcf,EAAKM,MAAQ,EAAI,EAAIN,EAAKM,MAAQ,EAAIN,EAAKO,QAClET,EAASU,OAAQxE,EAAO+D,EAAQ3B,SAEhC0B,EAASe,gBAAgB,K,cCvDpBG,E,WACF,WAAYC,EAAI1E,EAAGC,GAAG,oBACnBkB,KAAKuD,GAAKA,EACVvD,KAAKnB,EAAIA,EACTmB,KAAKlB,EAAIA,EACTkB,KAAKwD,UAAYxD,KAAKuD,GAAGC,UACzBxD,KAAKyD,gBAAkBzD,KAAKuD,GAAGC,U,2CAElC,SAAcA,GACXxD,KAAK0D,eAAiBF,I,kCAE1B,WACIxD,KAAKyD,gBAAkBzD,KAAKuD,GAAGC,UAC/BxD,KAAKuD,GAAGC,UAAYxD,KAAK0D,iB,kCAE7B,WACI1D,KAAKuD,GAAGC,UAAYxD,KAAKyD,kB,kBAE5B,gB,KAKSE,EAAb,kDACG,WAAYJ,EAAI1E,EAAGC,GAAI,uCACbyE,EAAG1E,EAAEC,GAFlB,wCAIG,WACIkB,KAAKuD,GAAGK,KAAO,cACf5D,KAAKuD,GAAGM,UAAY,QACpB7D,KAAKuD,GAAGO,SAAS,UAAW9D,KAAKnB,EAAGmB,KAAKlB,OAPhD,GAAmCwE,GAWrBS,EAAb,kDACE,WAAYR,EAAIX,EAAOC,GAAS,IAAD,8BAC3B,cAAMU,EAAG,EAAE,IACNX,MAAQA,EACb,EAAKC,OAASA,EAHa,EADjC,wCAME,WACI,6EACA7C,KAAKuD,GAAGS,WAAW,EAAE,EAAEhE,KAAK4C,MAAO5C,KAAK6C,QACxC,iFATN,GAA+BS,GAclBW,EAAb,kDACE,WAAYV,EAAIX,EAAOC,GAAS,IAAD,8BAC3B,cAAMU,EAAGX,EAAQ,EAAEC,EAAS,IACvBD,MAAQA,EACb,EAAKC,OAASA,EAGd,EAAKhE,EAAIQ,KAAK6E,MAAM,EAAKrF,GAAK,GAC9B,EAAKC,EAAIO,KAAK6E,MAAM,EAAKpF,GAAK,GAPH,EADjC,wCAUE,WACI,6EACAkB,KAAKuD,GAAGY,YAAc,EACtBnE,KAAKuD,GAAGa,OAAOpE,KAAKnB,EAAGmB,KAAKlB,EAAI,IAChCkB,KAAKuD,GAAGc,OAAOrE,KAAKnB,EAAGmB,KAAKlB,EAAI,IAChCkB,KAAKuD,GAAGa,OAAOpE,KAAKnB,EAAI,GAAKmB,KAAKlB,GAClCkB,KAAKuD,GAAGc,OAAOrE,KAAKnB,EAAI,GAAKmB,KAAKlB,GAClCkB,KAAKuD,GAAGe,SACR,iFAlBN,GAA+BhB,GC9ClB,SAASiB,EAAIjG,EAAMkG,GAE9B,IAAMC,EAAmB,CACrB7B,MAAO4B,EAAO5B,MACdC,OAAQ2B,EAAO3B,QAEf6B,EAAK,yBACH,IADG,cAEH,IAFG,cAGH,EAHG,cAIH,KACFC,EAAYC,SAASC,cAAc,UACvCF,EAAU/B,MAAQ6B,EAAiB7B,MAAM,EACzC+B,EAAU9B,OAAS4B,EAAiB5B,OACpC,IAAIiC,EAAYH,EAAUI,WAAW,MAErCD,EAAUE,UAAYN,EACtBI,EAAUG,YAAcP,EACxBI,EAAUI,YAAc,IACxB,IAAIC,EAAc,CACdC,KAAM,IAAIC,EAAkBP,EAAW,GAAI,IAC3CQ,OAAQ,IAAID,EAAcP,EAAUH,EAAU/B,MAAM+B,EAAU9B,QAC9DoB,UAAW,IAAIoB,EAAcP,EAAUH,EAAU/B,MAAM+B,EAAU9B,SAErEsC,EAAYG,OAAO9B,UAAY,EAC/B2B,EAAYlB,UAAUT,UAAY,EAClC+B,OAAOC,OAAOL,GAAaM,SAAQ,SAAAC,GAAQA,EAAIC,UAE/C,IAAIC,EAAa,IAAIpH,IAAcmG,GACnCiB,EAAWC,aAAc,EACzB,IAAI7G,EAAW,IAAIR,IAAwB,CAACsH,IAAKF,IACjD5G,EAAS+G,aAAc,EACvB,IAAIC,EAAgB,IAAIxH,IAAqB,GAAK,IAC9CyH,EAAQ,IAAIzH,IAAYwH,EAAehH,GAa3C,OAZAiH,EAAM9G,SAASO,IAAI,EAAE,GAAG,KACxBpB,EAAMY,IAAK+G,GAWJ,CACH1G,OALP,SAAgBC,MCtCF,SAASgF,EAAOA,GAC3B,IAEM0B,EAAQ,IAAI1H,IAGZiG,GAFS,IAAIjG,IAAc,EAAE,EAAE,GAEZ,CACrBoE,MAAO4B,EAAO5B,MACdC,OAAQ2B,EAAO3B,SAGbsD,EAAgB,CAClBtH,EAAG,EACHC,EAAG,GAGDR,EAwBN,WACI,IAAMA,EAAQ,IAAIE,IAGlB,OAFAF,EAAM8H,WAAa,IAAI5H,IAAY,SAE5BF,EA5BG+H,GACRjE,EA8BN,YAAyC,IAAlBQ,EAAiB,EAAjBA,MAAOC,EAAU,EAAVA,OACpBT,EAAW,IAAI5D,IAAoB,CAAEgG,OAAQA,EAAQ8B,WAAW,EAAMC,OAAO,IAC7EC,EAAMC,OAAOC,iBAAmBD,OAAOC,iBAAmB,EAQhE,OANAtE,EAASuE,cAAcH,GACvBpE,EAASO,QAAQC,EAAOC,GACxBT,EAASa,WAAY,EACrBb,EAASwE,YAAa,EACtBxE,EAASyE,aAAc,EAEhBzE,EAxCM0E,CAAYrC,GACvBxD,EA0CN,YAAyC,IAAlB2B,EAAiB,EAAjBA,MAAOC,EAAU,EAAVA,OACpBkE,EAAcnE,EAAQC,EAItB5B,EAAS,IAAIzC,IAHC,GAGoCuI,EAFtC,KACD,IAKjB,OAHA9F,EAAOL,MAAQ,EACfK,EAAO9B,SAASO,IAAI,EAAG,EAAG,GAEnBuB,EAnDI+F,CAAYvC,GACrBwC,EAqDN,SAA6B3I,GAKzB,MAJsB,CAClB,IAAI4I,EAAc5I,GAClB,IAAI6I,EAAa7I,IAxDH8I,CAAoB9I,GAEtC+I,EAAS,IAAIlF,EAAcC,GAC/BiF,EAAO1E,QAAS8B,EAAiB7B,MAAO6B,EAAiB5B,QACzDwE,EAAO5E,iBAAiB,MACxB4E,EAAO3E,UAAU,GACjB,IAAItC,EAAS,EACb9B,EAAMY,IAAI+B,GACVqG,QAAQC,IAAI9C,GACZ,IAAI+C,EAAIlJ,EAAMkG,GAGV,IAAIiD,EAASpI,KAAKqC,IAASrC,KAAKC,GAAK,IAAQ2B,EAAOJ,IAAM,GACtD6G,EAAe,IA2GvB,OAzGAjB,OAAOkB,iBAAiB,YA2DxB,SAAoBC,GAChB,IAAIC,EAAUD,EAAGE,OAEdD,GAAW,IAAMA,GAAW,IAC5BA,GAAW,IAAMA,GAAW,KAC5BA,GAAW,IAAMA,GAAW,MAEb,IAAXA,IAAgBzH,GAAgB,GAAIiH,EAAO3E,UAAUtC,IAC1C,IAAXyH,IAAgBzH,GAAiB,GAAIiH,EAAO3E,UAAUtC,IAGzDkH,QAAQC,IAAKnH,OAmCd,CACHb,OA3DJ,WAGI,IAFA,IAAMwI,EAAc7B,EAAM8B,iBAElBC,EAAE,EAAGA,EAAEhB,EAAciB,OAAQD,IACjChB,EAAcgB,GAAG1I,OAAOwI,GAM5BV,EAAOvE,OAAQxE,EAAO2C,IAkDtBkH,eA1BJ,WAA2B,IACfvF,EAAkB4B,EAAlB5B,MAAOC,EAAW2B,EAAX3B,OAEf4B,EAAiB7B,MAAQA,EACzB6B,EAAiB5B,OAASA,EAE1B5B,EAAOf,OAAS0C,EAAQC,EAGpB5B,EAAOJ,IAAQ,IAAMxB,KAAKC,GAAOD,KAAK+I,KAAMX,GAAW5E,EAAS6E,IAChEL,EAAO3E,WAvFH+B,EAAiB7B,MAAO,MADnB,KAAM,MA2FnB3B,EAAOoH,yBACPhB,EAAO1E,QAASC,EAAOC,GAEvBT,EAASO,QAAQC,EAAOC,IAWxByF,YARJ,SAAqBzJ,EAAGC,GACpBqH,EAActH,EAAIA,EAClBsH,EAAcrH,EAAIA,I,MC5IX,I,QCGMyJ,E,uKAEjB,YDLW,SAAAC,GAEX,IAAMhE,EASN,SAAsBI,EAAU4D,GAC5B,IAAMhE,EAASI,EAASC,cAAc,UAEtC,OADA2D,EAAUC,YAAYjE,GACfA,EAZIkE,CAAa9D,SAAU4D,GAChCG,EAAe,IAAIC,EAAapE,GAoBtC,SAASqE,IACLrE,EAAOE,MAAM9B,MAAQ,OACrB4B,EAAOE,MAAM7B,OAAQ,OAErB2B,EAAO5B,MAAS4B,EAAOsE,YACvBtE,EAAO3B,OAAS2B,EAAOuE,aAKL1J,KAAK2J,MAAMxE,EAAOsE,YAAY,GAC7BzJ,KAAK2J,MAAMxE,EAAOuE,aAAa,GAElDJ,EAAaR,iBAlBb1B,OAAOwC,SAAWJ,EAElBA,IAwBJ,SAAS/F,EAAOtD,GAEZmJ,EAAapJ,SAEb2J,sBAAsBpG,GAvC1BA,GCHIqG,CAAgBnJ,KAAKoJ,oB,oBAGzB,WAAW,IAAD,OACN,OACI,qBAAKC,UAAU,gBAAgBC,IAAK,SAAAC,GAAO,OAAI,EAAKH,iBAAmBG,S,GAR/CC,aCMrBC,MARf,WACE,OACE,qBAAKJ,UAAU,MAAf,SACE,cAAC,EAAD,OCMSK,EAZS,SAAAC,GAClBA,GAAeA,aAAuBC,UACxC,6BAAqBC,MAAK,YAAkD,IAA/CC,EAA8C,EAA9CA,OAAQC,EAAsC,EAAtCA,OAAQC,EAA8B,EAA9BA,OAAQC,EAAsB,EAAtBA,OAAQC,EAAc,EAAdA,QAC3DJ,EAAOH,GACPI,EAAOJ,GACPK,EAAOL,GACPM,EAAON,GACPO,EAAQP,OCDdQ,IAASrH,OACP,cAAC,IAAMsH,WAAP,UACE,cAAC,EAAD,MAEFxF,SAASyF,eAAe,SAM1BX,M","file":"static/js/main.bcf7febc.chunk.js","sourcesContent":["import * as THREE from 'three'\n\nexport default function scene(scene) {    \n    const group = new THREE.Group();\n    const boxGeometry = new THREE.BoxGeometry(0.4, 0.4, 0.4);\n    const boxGeometrySmall = new THREE.BoxGeometry(0.00002, 0.00002, 0.00002);\n    function makeInstance(geometry, color, x,y,z) {\n        const material = new THREE.MeshPhongMaterial({color});\n    \n        const cube = new THREE.Mesh(geometry, material);\n        scene.add(cube);\n        \n        //cube.rotation.x = 0.2;\n        cube.position.x = x;\n        cube.position.y = y;\n        cube.position.z = z;\n        \n        return cube;\n      }\n    const cubes = [\n    //makeInstance(boxGeometry, 0x44aa88,  0, 0, -0.5),\n    makeInstance(boxGeometrySmall, 0xff0000,  -0.032, 0, -0.0002),\n    makeInstance(boxGeometrySmall, 0x00ff00,  0.032, 0, -0.0002)\n      ];\n    //group.add(boxGeometry);\n    //scene.add(group);\n\n\n    group.rotation.z = Math.PI/4;\n\n    const speed = 0.5;\n    const textureOffsetSpeed = 0.02;\n\n    function deformGeometry(geometry) {\n        /*for (let i=0; i<geometry.vertices.length; i+=2) {\n            const scalar = 1 + Math.random()*0.8;\n            geometry.vertices[i].multiplyScalar(scalar)\n        }*/\n\n        return geometry;\n    }\n\n    function update(time) {\n        const angle = time*speed;\n\n        //group.rotation.y = angle;\n        //cubes[0].rotation.x = angle;\n        //cubes[0].rotation.y = angle;\n        //subjectMaterial.alphaMap.offset.y = 0.55 + time * textureOffsetSpeed;\n\n        //subjectWireframe.material.color.setHSL( Math.sin(angle*2), 0.5, 0.5 );\n        \n        //const scale = (Math.sin(angle*8)+6.4)/5;\n        //subjectWireframe.scale.set(scale, scale, scale)\n    }\n\n    return {\n        update\n    }\n}","import * as THREE from 'three'\n\n\nexport default function scene(scene) {    \n\n    /*const lightIn = new THREE.PointLight(\"#4CAF50\", 30);\n    const lightOut = new THREE.PointLight(\"#2196F3\", 10);\n    lightOut.position.set(40,20,40);*/\n    const color = 0xFFFFFF;\n    const intensity = 1;\n    const light = new THREE.DirectionalLight(color, intensity);\n    //light.position.set(-1, 2, 4);\n    light.position.set(-1, 2, 4);\n    scene.add(light);\n    //scene.add(lightIn);\n    //scene.add(lightOut);\n    \n    //const rad = 80;\n\n    function update(time) {\n        //const x = rad * Math.sin(time*0.2)\n        //lightOut.position.x = x;\n    }\n\n    return {\n        update\n    }\n}","import { Matrix4 } from 'three/src/math/Matrix4.js';\nimport { MathUtils } from 'three/src/math/MathUtils.js';\nimport { PerspectiveCamera } from 'three/src/cameras/PerspectiveCamera.js';\n\nconst _eyeRight = new Matrix4();\nconst _eyeLeft = new Matrix4();\nconst offsetView = new Matrix4();\nclass StereoCamera {\n\n\tconstructor() {\n\n\t\tthis.type = 'StereoCamera';\n\n\t\tthis.aspect = 1;\n\n\t\tthis.eyeSep = 0.064;\n\n        this.offset = 0;\n        \n\t\tthis.cameraL = new PerspectiveCamera();\n\t\tthis.cameraL.layers.enable( 1 );\n\t\tthis.cameraL.matrixAutoUpdate = false;\n\n\t\tthis.cameraR = new PerspectiveCamera();\n\t\tthis.cameraR.layers.enable( 2 );\n\t\tthis.cameraR.matrixAutoUpdate = false;\n\n\t\tthis._cache = {\n\t\t\tfocus: null,\n\t\t\tfov: null,\n\t\t\taspect: null,\n\t\t\tnear: null,\n\t\t\tfar: null,\n\t\t\tzoom: null,\n\t\t\teyeSep: null,\n            offset: null\n\t\t};\n\t}\n\n\tupdate( camera ) {\n\n\t\tconst cache = this._cache;\n\n\t\tconst needsUpdate = cache.focus !== camera.focus || cache.fov !== camera.fov ||\n\t\t\tcache.aspect !== camera.aspect * this.aspect || cache.near !== camera.near ||\n\t\t\tcache.far !== camera.far || cache.zoom !== camera.zoom || cache.eyeSep !== this.eyeSep || cache.offset !== this.offset;;\n\n\t\tif ( needsUpdate ) {\n\n\t\t\tcache.focus = camera.focus;\n\t\t\tcache.fov = camera.fov;\n\t\t\tcache.aspect = camera.aspect * this.aspect;\n\t\t\tcache.near = camera.near;\n\t\t\tcache.far = camera.far;\n\t\t\tcache.zoom = camera.zoom;\n\t\t\tcache.eyeSep = this.eyeSep;\n            cache.offset = this.offset;\n\t\t\t// Off-axis stereoscopic effect based on\n\t\t\t// http://paulbourke.net/stereographics/stereorender/\n\n\t\t\tconst projectionMatrix = camera.projectionMatrix.clone();\n\t\t\tconst eyeSepHalf = cache.eyeSep / 2;\n\t\t\tconst eyeSepOnProjection = eyeSepHalf * cache.near / cache.focus;\n\t\t\tconst ymax = ( cache.near * Math.tan( MathUtils.DEG2RAD * cache.fov * 0.5 ) ) / cache.zoom;\n\t\t\tlet xmin, xmax;\n\n\t\t\t// translate xOffset\n\n\t\t\t_eyeLeft.elements[ 12 ] = - eyeSepHalf;\n\t\t\t_eyeRight.elements[ 12 ] = eyeSepHalf;\n\n\t\t\t// for left eye\n\n\t\t\txmin = - ymax * cache.aspect + eyeSepOnProjection;\n\t\t\txmax = ymax * cache.aspect + eyeSepOnProjection;\n\n\t\t\tprojectionMatrix.elements[ 0 ] = 2 * cache.near / ( xmax - xmin );\n\t\t\tprojectionMatrix.elements[ 8 ] = ( xmax + xmin ) / ( xmax - xmin );\n\n            var xminFixed = - ymax  + eyeSepOnProjection;\n\t\t\tvar xmaxFixed = ymax + eyeSepOnProjection;\n\n            offsetView.identity();\n            offsetView.setPosition(this._cache.offset,0,0);\n            offsetView.copy(offsetView.multiply(projectionMatrix));\n\n            this.cameraL.projectionMatrix.copy( offsetView );\n\t\t\t// for right eye\n\n\t\t\txmin = - ymax * cache.aspect - eyeSepOnProjection;\n\t\t\txmax = ymax * cache.aspect - eyeSepOnProjection;\n\n\t\t\tprojectionMatrix.elements[ 0 ] = 2 * cache.near / ( xmax - xmin );\n\t\t\tprojectionMatrix.elements[ 8 ] = ( xmax + xmin ) / ( xmax - xmin );\n\n            xminFixed = - ymax  + eyeSepOnProjection;\n\t\t\txmaxFixed = ymax + eyeSepOnProjection;\n\n            offsetView.identity();\n            offsetView.setPosition(-this._cache.offset,0,0);\n            offsetView.copy(offsetView.multiply(projectionMatrix));\n\n\t\t\tthis.cameraR.projectionMatrix.copy( offsetView );\n\n\t\t}\n\n\t\tthis.cameraL.matrixWorld.copy( camera.matrixWorld ).multiply( _eyeLeft );\n\t\tthis.cameraR.matrixWorld.copy( camera.matrixWorld ).multiply( _eyeRight );\n        \n\t}\n\n}\n\nexport { StereoCamera };","/*import {\n\tStereoCamera,\n\tVector2\n} from 'three/build/three.module.js';*/\nimport {\n\tVector2\n} from 'three/build/three.module.js';\n\nimport {StereoCamera} from \"./StereoCamera.js\"\n\nvar StereoEffect = function ( renderer ) {\n\n\tvar _stereo = new StereoCamera();\n\t_stereo.aspect = 0.5;\n\tvar size = new Vector2();\n\n    renderer.getSize( size );\n\n\tthis.setEyeSeparation = function ( eyeSep ) {\n\n\t\t_stereo.eyeSep = eyeSep;\n\n\t};\n    this.setOffset = function ( offset ) {\n\n\t\t_stereo.offset = offset;\n\n\t};\n\n\tthis.setSize = function ( width, height ) {\n\n\t\trenderer.setSize( width, height );\n\n\t};\n\n\tthis.render = function ( scene, camera ) {\n\t\tscene.updateMatrixWorld();\n\n\t\tif ( camera.parent === null ) camera.updateMatrixWorld();\n        \n\t\t_stereo.update( camera );\n        \n\t\trenderer.getSize( size );\n        \n\t\tif ( renderer.autoClear ) renderer.clear();\n\t\trenderer.setScissorTest( true );\n\n\t\trenderer.setScissor( 0, 0, size.width / 2, size.height );\n\t\trenderer.setViewport( 0, 0, (size.width / 2), size.height );\n\t\trenderer.render( scene, _stereo.cameraL );\n\n\t\trenderer.setScissor( (size.width / 2), 0, size.width / 2, size.height );\n\t\trenderer.setViewport( (size.width / 2), 0, (size.width / 2), size.height );\n\t\trenderer.render( scene, _stereo.cameraR );\n\n\t\trenderer.setScissorTest( false );\n        \n\t};\n\n};\n\nexport { StereoEffect };"," class hudControl {\n     constructor(bm, x, y){\n        this.bm = bm;\n        this.x = x;\n        this.y = y;\n        this.lineWidth = this.bm.lineWidth;\n        this.globalLineWidth = this.bm.lineWidth;\n     }\n     set lineWidth(lineWidth){\n        this.localLineWidth = lineWidth;\n    }\n    changeLocalLineWidth(){\n        this.globalLineWidth = this.bm.lineWidth;\n        this.bm.lineWidth = this.localLineWidth;\n    }\n    resetGlobalLineWidth(){\n        this.bm.lineWidth = this.globalLineWidth;\n    }\n     draw(){\n\n     }\n }\n \n export class hudSimpleText extends hudControl{\n    constructor(bm, x, y) {\n        super(bm,x,y);\n    }\n    draw(){\n        this.bm.font = \"20px monaco\";\n        this.bm.textAlign = 'start';\n        this.bm.fillText('Text...', this.x, this.y);\n    }\n  }\n\n  export class hudBorder extends hudControl{\n    constructor(bm, width, height) {\n        super(bm,0,0);\n        this.width = width;\n        this.height = height;\n    }  \n    draw(){\n        super.changeLocalLineWidth();\n        this.bm.strokeRect(0,0,this.width, this.height);\n        super.resetGlobalLineWidth();\n    }\n\n  }\n \n  export class crosshair extends hudControl{\n    constructor(bm, width, height) {\n        super(bm,width / 2,height / 2);\n        this.width = width;\n        this.height = height;\n\n        // remove aliasing\n        this.x = Math.floor(this.x) + 0.5;\n        this.y = Math.floor(this.y) + 0.5;\n    }\n    draw(){\n        super.changeLocalLineWidth();\n        this.bm.strokeWidth = 1;\n        this.bm.moveTo(this.x, this.y - 10);\n        this.bm.lineTo(this.x, this.y + 10);\n        this.bm.moveTo(this.x - 10,  this.y);\n        this.bm.lineTo(this.x + 10,  this.y);\n        this.bm.stroke();\n        super.resetGlobalLineWidth();\n    }\n  }\n\n\n\n\n\n  export default {hudSimpleText, hudBorder}","import * as THREE from 'three'\nimport * as HUD from './HudControls';\nexport default function hud(scene,canvas){\n    \n    const screenDimensions = {\n        width: canvas.width,\n        height: canvas.height\n    }\n    var style = `rgba(\n        ${0xa3},\n        ${0xff},\n        ${0x00},\n        ${0xFF}`;\n    var hudCanvas = document.createElement('canvas');\n    hudCanvas.width = screenDimensions.width/2; //keep it square assuming default 300x150\n    hudCanvas.height = screenDimensions.height;\n    var hudBitmap = hudCanvas.getContext('2d');\n    //flipHoriz(hudBitmap);    \n    hudBitmap.fillStyle = style;\n    hudBitmap.strokeStyle = style;\n    hudBitmap.globalAlpha = 0.75;\n    var hudElements = {\n        info: new HUD.hudSimpleText(hudBitmap, 10, 20),\n        border: new HUD.hudBorder(hudBitmap,hudCanvas.width,hudCanvas.height),\n        crosshair: new HUD.crosshair(hudBitmap,hudCanvas.width,hudCanvas.height)\n    };\n    hudElements.border.lineWidth = 5;\n    hudElements.crosshair.lineWidth = 3;\n    Object.values(hudElements).forEach(val => {val.draw()});\n\n    var hudTexture = new THREE.Texture(hudCanvas);\n    hudTexture.needsUpdate = true;\n    var material = new THREE.MeshBasicMaterial({map: hudTexture} );//{color: 0xffff00, side: THREE.DoubleSide} );\n    material.transparent = true;\n    var planeGeometry = new THREE.PlaneGeometry( 0.4, 0.4 );\n    var plane = new THREE.Mesh( planeGeometry, material );\n    plane.position.set(0,0,-0.15);\n    scene.add( plane );\n\n    function flipHoriz(drawing){\n        drawing.translate(screenDimensions.width/2,0);\n        drawing.scale(-1, 1);\n    }\n\n\tfunction update(time) {\n\n    }\n\n    return {\n        update,\n    }\n}","import * as THREE from 'three';\nimport SceneSubject from './SceneSubject';\nimport GeneralLights from './GeneralLights';\nimport { StereoEffect } from './StereoEffect.js';\nimport Hud from './Hud';\n\nexport default function canvas(canvas)  {\n    var preserveSize = true;\n\n    const clock = new THREE.Clock();\n    const origin = new THREE.Vector3(0,0,0);\n\n    const screenDimensions = {\n        width: canvas.width,\n        height: canvas.height\n    }\n    \n    const mousePosition = {\n        x: 0,\n        y: 0\n    }\n\n    const scene = buildScene();\n    const renderer = buildRender(screenDimensions);\n    const camera = buildCamera(screenDimensions);\n    const sceneSubjects = createSceneSubjects(scene);\n\n    var effect = new StereoEffect( renderer );\n    effect.setSize( screenDimensions.width, screenDimensions.height );\n    effect.setEyeSeparation(0.064);\n    effect.setOffset(0);\n    var offset = 0;\n    scene.add(camera);\n    console.log(screenDimensions);\n    new Hud(scene,canvas);\n    if (preserveSize){\n        // remember these initial values\n        var tanFOV = Math.tan( ( ( Math.PI / 180 ) * camera.fov / 2 ) );\n        var windowHeight = 150;//window.innerHeight;\n    }\n    window.addEventListener(\"keypress\", onKeyPress);\n\n    function getOffset(){\n        const pxMm = 0.254/454;\n        return (screenDimensions.width -300)*pxMm;\n    }\n    function buildScene() {\n        const scene = new THREE.Scene();\n        scene.background = new THREE.Color('black');\n\n        return scene;\n    }\n\n    function buildRender({ width, height }) {\n        const renderer = new THREE.WebGLRenderer({ canvas: canvas, antialias: true, alpha: true }); \n        const DPR = window.devicePixelRatio ? window.devicePixelRatio : 1;\n\n        renderer.setPixelRatio(DPR);\n        renderer.setSize(width, height);\n        renderer.autoClear = false;     //needed for canvas2d overlayed\n        renderer.gammaInput = true;\n        renderer.gammaOutput = true; \n        \n        return renderer;\n    }\n\n    function buildCamera({ width, height }) {\n        const aspectRatio = width / height;\n        const fieldOfView = 90;\n        const nearPlane = 0.0001;\n        const farPlane = 20; \n        const camera = new THREE.PerspectiveCamera(fieldOfView, aspectRatio, nearPlane, farPlane);\n        camera.focus = 3;\n        camera.position.set(0, 0, 0);\n\n        return camera;\n    }\n\n    function createSceneSubjects(scene) {\n        const sceneSubjects = [\n            new GeneralLights(scene),\n            new SceneSubject(scene),\n        ];\n        return sceneSubjects;\n    }\n\n\n    function update() {\n        const elapsedTime = clock.getElapsedTime();\n\n        for(let i=0; i<sceneSubjects.length; i++)\n            sceneSubjects[i].update(elapsedTime);\n        //renderer.render(scene, camera);\n        render();\n    }\n    function render() {\n        //updateCameraPositionRelativeToMouse()\n        effect.render( scene, camera );\n    }\n    function onKeyPress(ev) {\n        let keycode = ev.which;\n        if (\n          (keycode >= 48 && keycode <= 57) ||\n          (keycode >= 97 && keycode <= 122) ||\n          (keycode >= 65 && keycode <= 90)\n        ) {\n            if(keycode == 49) {offset= offset +0.1;effect.setOffset(offset);}\n            if(keycode == 50) {offset = offset -0.1;effect.setOffset(offset);}\n            //if(keycode == 51) {camera.rotateY(Math.PI/360);}\n            //if(keycode == 52) {camera.rotateY(-Math.PI/360);}\n            console.log( offset);\n        }\n      }\n\n\n    function updateCameraPositionRelativeToMouse() {\n        camera.position.x += (  (mousePosition.x * 0.1) - camera.position.x ) * 0.1;\n        camera.position.y += ( -(mousePosition.y * 0.1) - camera.position.y ) * 0.1;\n        camera.lookAt(origin );\n    }\n\n    function onWindowResize() {\n        const { width, height } = canvas;\n        \n        screenDimensions.width = width;\n        screenDimensions.height = height;\n\n        camera.aspect = width / height;\n        if (preserveSize){\n            // adjust the FOV\n            camera.fov = ( 360 / Math.PI ) * Math.atan( tanFOV * ( height / windowHeight ) );\n            effect.setOffset(getOffset());\n        }\n\n        camera.updateProjectionMatrix();\n        effect.setSize( width, height);\n        //camera.lookAt( scene.position );\n        renderer.setSize(width, height);   \n    }\n\n    function onMouseMove(x, y) {\n        mousePosition.x = x;\n        mousePosition.y = y;\n    }\n\n    return {\n        update,\n        onWindowResize,\n        onMouseMove\n    }\n}","import SceneManager from './SceneManager';\n\nexport default container => {\n    \n    const canvas = createCanvas(document, container);\n    const sceneManager = new SceneManager(canvas);\n\n    let canvasHalfWidth;\n    let canvasHalfHeight;\n\n    bindEventListeners();\n    render();\n    \n    function createCanvas(document, container) {\n        const canvas = document.createElement(\"canvas\");    \n        container.appendChild(canvas);   \n        return canvas;\n    }\n\n    function bindEventListeners() {\n        window.onresize = resizeCanvas;\n        //window.onmousemove = mouseMove;\n        resizeCanvas();\t\n    }\n\n    function resizeCanvas() {        \n        canvas.style.width = '100%';\n        canvas.style.height= '100%';\n        \n        canvas.width  = canvas.offsetWidth;\n        canvas.height = canvas.offsetHeight;\n\n\n\n\n        canvasHalfWidth = Math.round(canvas.offsetWidth/2);\n        canvasHalfHeight = Math.round(canvas.offsetHeight/2);\n\n        sceneManager.onWindowResize();\n        //hudManager.onWindowResize()\n    }\n\n    function mouseMove({screenX, screenY}) {\n        sceneManager.onMouseMove(screenX-canvasHalfWidth, screenY-canvasHalfHeight);\n    }\n\n    function render(time) {\n        \n        sceneManager.update();\n        //hudManager.update();\n        requestAnimationFrame(render);\n    }\n}\n","import React, { Component } from 'react';\n\nimport threeEntryPoint from \"./threejs/threeEntryPoint\"\nimport \"./viewer.css\"\n\nexport default class Viewer extends Component {\n    \n    componentDidMount() {\n        threeEntryPoint(this.threeRootElement);\n    }\n\n    render () {\n        return (\n            <div className=\"viewer-viewer\" ref={element => this.threeRootElement = element} />\n        );\n    }\n}","import './App.css';\nimport Viewer from './Components/Viewer/Viewer';\n\nfunction App() {\n  return (\n    <div className=\"App\">\n      <Viewer />\n    </div>\n  );\n}\n\nexport default App;\n","const reportWebVitals = onPerfEntry => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport reportWebVitals from './reportWebVitals';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n"],"sourceRoot":""}