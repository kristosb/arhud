(this.webpackJsonparhud=this.webpackJsonparhud||[]).push([[0],{23:function(t,e,i){},24:function(t,e,i){},26:function(t,e,i){},28:function(t,e,i){"use strict";i.r(e);var n=i(14),a=i.n(n),o=i(18),s=i.n(o),h=(i(23),i(24),i(0)),r=i(1),c=i(2),u=i(3),l=i(7);function f(t){var e=new l.e,i=(new l.a(.4,.4,.4),new l.a(2e-5,2e-5,2e-5));function n(e,i,n,a,o){var s=new l.h({color:i}),h=new l.f(e,s);return t.add(h),h.position.x=n,h.position.y=a,h.position.z=o,h}n(i,16711680,-.032,0,-2e-4),n(i,65280,.032,0,-2e-4);e.rotation.z=Math.PI/4;return{update:function(t){}}}function d(t){var e=new l.d(16777215,1);return e.position.set(-1,2,4),t.add(e),{update:function(t){}}}var p=i(9),w=i(8),m=i(17),b=new p.a,v=new p.a,y=new p.a,g=function(){function t(){Object(h.a)(this,t),this.type="StereoCamera",this.aspect=1,this.eyeSep=.064,this.offset=0,this.cameraL=new m.a,this.cameraL.layers.enable(1),this.cameraL.matrixAutoUpdate=!1,this.cameraR=new m.a,this.cameraR.layers.enable(2),this.cameraR.matrixAutoUpdate=!1,this._cache={focus:null,fov:null,aspect:null,near:null,far:null,zoom:null,eyeSep:null,offset:null}}return Object(r.a)(t,[{key:"update",value:function(t){var e=this._cache;if(e.focus!==t.focus||e.fov!==t.fov||e.aspect!==t.aspect*this.aspect||e.near!==t.near||e.far!==t.far||e.zoom!==t.zoom||e.eyeSep!==this.eyeSep||e.offset!==this.offset){e.focus=t.focus,e.fov=t.fov,e.aspect=t.aspect*this.aspect,e.near=t.near,e.far=t.far,e.zoom=t.zoom,e.eyeSep=this.eyeSep,e.offset=this.offset;var i,n,a=t.projectionMatrix.clone(),o=e.eyeSep/2,s=o*e.near/e.focus,h=e.near*Math.tan(w.a.DEG2RAD*e.fov*.5)/e.zoom;v.elements[12]=-o,b.elements[12]=o,i=-h*e.aspect+s,n=h*e.aspect+s,a.elements[0]=2*e.near/(n-i),a.elements[8]=(n+i)/(n-i);y.identity(),y.setPosition(this._cache.offset,0,0),y.copy(y.multiply(a)),this.cameraL.projectionMatrix.copy(y),i=-h*e.aspect-s,n=h*e.aspect-s,a.elements[0]=2*e.near/(n-i),a.elements[8]=(n+i)/(n-i),-h+s,h+s,y.identity(),y.setPosition(-this._cache.offset,0,0),y.copy(y.multiply(a)),this.cameraR.projectionMatrix.copy(y)}this.cameraL.matrixWorld.copy(t.matrixWorld).multiply(v),this.cameraR.matrixWorld.copy(t.matrixWorld).multiply(b)}}]),t}(),j=function(t){var e=new g;e.aspect=.5;var i=new l.m;t.getSize(i),this.setEyeSeparation=function(t){e.eyeSep=t},this.setOffset=function(t){e.offset=t},this.setSize=function(e,i){t.setSize(e,i)},this.render=function(n,a){n.updateMatrixWorld(),null===a.parent&&a.updateMatrixWorld(),e.update(a),t.getSize(i),t.autoClear&&t.clear(),t.setScissorTest(!0),t.setScissor(0,0,i.width/2,i.height),t.setViewport(0,0,i.width/2,i.height),t.render(n,e.cameraL),t.setScissor(i.width/2,0,i.width/2,i.height),t.setViewport(i.width/2,0,i.width/2,i.height),t.render(n,e.cameraR),t.setScissorTest(!1)}},O=i(5),x=i(4),W=function(){function t(e,i,n){Object(h.a)(this,t),this.bm=e,this.x=i,this.y=n,this.lineWidth=this.bm.lineWidth,this.globalLineWidth=this.bm.lineWidth}return Object(r.a)(t,[{key:"lineWidth",set:function(t){this.localLineWidth=t}},{key:"changeLocalLineWidth",value:function(){this.globalLineWidth=this.bm.lineWidth,this.bm.lineWidth=this.localLineWidth}},{key:"resetGlobalLineWidth",value:function(){this.bm.lineWidth=this.globalLineWidth}},{key:"draw",value:function(){}}]),t}(),S=function(t){Object(c.a)(i,t);var e=Object(u.a)(i);function i(t,n,a){return Object(h.a)(this,i),e.call(this,t,n,a)}return Object(r.a)(i,[{key:"draw",value:function(){this.bm.font="20px monaco",this.bm.textAlign="start",this.bm.fillText("Text...",this.x,this.y)}}]),i}(W),L=function(t){Object(c.a)(i,t);var e=Object(u.a)(i);function i(t,n,a){var o;return Object(h.a)(this,i),(o=e.call(this,t,0,0)).width=n,o.height=a,o}return Object(r.a)(i,[{key:"draw",value:function(){Object(O.a)(Object(x.a)(i.prototype),"changeLocalLineWidth",this).call(this),this.bm.strokeRect(0,0,this.width,this.height),Object(O.a)(Object(x.a)(i.prototype),"resetGlobalLineWidth",this).call(this)}}]),i}(W),k=function(t){Object(c.a)(i,t);var e=Object(u.a)(i);function i(t,n,a){var o;return Object(h.a)(this,i),(o=e.call(this,t,n/2,a/2)).width=n,o.height=a,o.x=Math.floor(o.x)+.5,o.y=Math.floor(o.y)+.5,o}return Object(r.a)(i,[{key:"draw",value:function(){Object(O.a)(Object(x.a)(i.prototype),"changeLocalLineWidth",this).call(this),this.bm.strokeWidth=1,this.bm.moveTo(this.x,this.y-10),this.bm.lineTo(this.x,this.y+10),this.bm.moveTo(this.x-10,this.y),this.bm.lineTo(this.x+10,this.y),this.bm.stroke(),Object(O.a)(Object(x.a)(i.prototype),"resetGlobalLineWidth",this).call(this)}}]),i}(W);function M(t,e){var i={width:e.width,height:e.height},n="rgba(\n        ".concat(163,",\n        ",255,",\n        ",0,",\n        ",255),a=document.createElement("canvas");a.width=i.width/2,a.height=i.height;var o=a.getContext("2d");o.fillStyle=n,o.strokeStyle=n,o.globalAlpha=.75;var s={info:new S(o,10,20),border:new L(o,a.width,a.height),crosshair:new k(o,a.width,a.height)};s.border.lineWidth=5,s.crosshair.lineWidth=3,Object.values(s).forEach((function(t){t.draw()}));var h=new l.l(a);h.needsUpdate=!0;var r=new l.g({map:h});r.transparent=!0;var c=new l.j(.4,.4),u=new l.f(c,r);return u.position.set(0,0,-.15),t.add(u),{update:function(t){}}}function z(t){var e=new l.b,i=(new l.n(0,0,0),{width:t.width,height:t.height}),n={x:0,y:0},a=function(){var t=new l.k;return t.background=new l.c("black"),t}(),o=function(e){var i=e.width,n=e.height,a=new l.o({canvas:t,antialias:!0,alpha:!0}),o=window.devicePixelRatio?window.devicePixelRatio:1;return a.setPixelRatio(o),a.setSize(i,n),a.autoClear=!1,a.gammaInput=!0,a.gammaOutput=!0,a}(i),s=function(t){var e=t.width,i=t.height,n=e/i,a=new l.i(90,n,1e-4,20);return a.focus=3,a.position.set(0,0,0),a}(i),h=function(t){return[new d(t),new f(t)]}(a),r=new j(o);r.setSize(i.width,i.height),r.setEyeSeparation(.064),r.setOffset(0);var c=0;a.add(s),console.log(i),new M(a,t);var u=Math.tan(Math.PI/180*s.fov/2),p=150;return window.addEventListener("keypress",(function(t){var e=t.which;(e>=48&&e<=57||e>=97&&e<=122||e>=65&&e<=90)&&(49==e&&(c+=.1,r.setOffset(c)),50==e&&(c-=.1,r.setOffset(c)),console.log(c))})),{update:function(){for(var t=e.getElapsedTime(),i=0;i<h.length;i++)h[i].update(t);r.render(a,s)},onWindowResize:function(){var e=t.width,n=t.height;i.width=e,i.height=n,s.aspect=e/n,s.fov=360/Math.PI*Math.atan(u*(n/p)),r.setOffset((i.width-300)*(.254/454)),s.updateProjectionMatrix(),r.setSize(e,n),o.setSize(e,n)},onMouseMove:function(t,e){n.x=t,n.y=e}}}i(26);var R=i(12),E=function(t){Object(c.a)(i,t);var e=Object(u.a)(i);function i(){return Object(h.a)(this,i),e.apply(this,arguments)}return Object(r.a)(i,[{key:"componentDidMount",value:function(){!function(t){var e=function(t,e){var i=t.createElement("canvas");return e.appendChild(i),i}(document,t),i=new z(e);function n(){e.style.width="100%",e.style.height="100%",e.width=e.offsetWidth,e.height=e.offsetHeight,Math.round(e.offsetWidth/2),Math.round(e.offsetHeight/2),i.onWindowResize()}window.onresize=n,n(),function t(e){i.update(),requestAnimationFrame(t)}()}(this.threeRootElement)}},{key:"render",value:function(){var t=this;return Object(R.jsx)("div",{className:"viewer-viewer",ref:function(e){return t.threeRootElement=e}})}}]),i}(n.Component);var P=function(){return Object(R.jsx)("div",{className:"App",children:Object(R.jsx)(E,{})})},T=function(t){t&&t instanceof Function&&i.e(3).then(i.bind(null,29)).then((function(e){var i=e.getCLS,n=e.getFID,a=e.getFCP,o=e.getLCP,s=e.getTTFB;i(t),n(t),a(t),o(t),s(t)}))};s.a.render(Object(R.jsx)(a.a.StrictMode,{children:Object(R.jsx)(P,{})}),document.getElementById("root")),T()}},[[28,1,2]]]);
//# sourceMappingURL=main.bcf7febc.chunk.js.map